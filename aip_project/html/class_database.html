<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Database Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_database-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Database Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="database_8h_source.html">database.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a60a40648eb37760f39516ca67f6d9738" id="r_a60a40648eb37760f39516ca67f6d9738"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#a60a40648eb37760f39516ca67f6d9738">Database</a> (const char *filename)</td></tr>
<tr class="separator:a60a40648eb37760f39516ca67f6d9738"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d399a2ad58d69daab9b05330e1316d" id="r_a84d399a2ad58d69daab9b05330e1316d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#a84d399a2ad58d69daab9b05330e1316d">~Database</a> ()</td></tr>
<tr class="separator:a84d399a2ad58d69daab9b05330e1316d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f8b6d2941a4aee50f225e08e97291c" id="r_a83f8b6d2941a4aee50f225e08e97291c"><td class="memItemLeft" align="right" valign="top"><a id="a83f8b6d2941a4aee50f225e08e97291c" name="a83f8b6d2941a4aee50f225e08e97291c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Database</b> (const <a class="el" href="class_database.html">Database</a> &amp;)=delete</td></tr>
<tr class="separator:a83f8b6d2941a4aee50f225e08e97291c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b93a4878076c7cfddd5b4058297f14" id="r_a46b93a4878076c7cfddd5b4058297f14"><td class="memItemLeft" align="right" valign="top"><a id="a46b93a4878076c7cfddd5b4058297f14" name="a46b93a4878076c7cfddd5b4058297f14"></a>
<a class="el" href="class_database.html">Database</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="class_database.html">Database</a> &amp;)=delete</td></tr>
<tr class="separator:a46b93a4878076c7cfddd5b4058297f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf1998701b987be4f51f64a93a279cb4" id="r_acf1998701b987be4f51f64a93a279cb4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#acf1998701b987be4f51f64a93a279cb4">isFirstRun</a> ()</td></tr>
<tr class="separator:acf1998701b987be4f51f64a93a279cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af19e2a4ea9cd3c2bef5685fabff27b40" id="r_af19e2a4ea9cd3c2bef5685fabff27b40"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#af19e2a4ea9cd3c2bef5685fabff27b40">setMaster</a> (const QString &amp;password)</td></tr>
<tr class="separator:af19e2a4ea9cd3c2bef5685fabff27b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd460398c14533a779b63b82abb04aa4" id="r_afd460398c14533a779b63b82abb04aa4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#afd460398c14533a779b63b82abb04aa4">verifyMaster</a> (const QString &amp;password)</td></tr>
<tr class="separator:afd460398c14533a779b63b82abb04aa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a830f3c4682fb0c3d01db2dd856d3fe3c" id="r_a830f3c4682fb0c3d01db2dd856d3fe3c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#a830f3c4682fb0c3d01db2dd856d3fe3c">getMaster</a> ()</td></tr>
<tr class="separator:a830f3c4682fb0c3d01db2dd856d3fe3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4af45821ed90ebb854afccad7b4c462b" id="r_a4af45821ed90ebb854afccad7b4c462b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#a4af45821ed90ebb854afccad7b4c462b">insertData</a> (const char *site, const char *pw, const char *cat, const char *cmt)</td></tr>
<tr class="separator:a4af45821ed90ebb854afccad7b4c462b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6226536d301e0d45d92960c738484ae4" id="r_a6226536d301e0d45d92960c738484ae4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#a6226536d301e0d45d92960c738484ae4">deleteData</a> (const char *id)</td></tr>
<tr class="separator:a6226536d301e0d45d92960c738484ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15bc7c6a7a1c7d5e0af1bb0fcbc9e4c4" id="r_a15bc7c6a7a1c7d5e0af1bb0fcbc9e4c4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#a15bc7c6a7a1c7d5e0af1bb0fcbc9e4c4">updateData</a> (const char *id, const char *site, const char *pw, const char *cat, const char *cmt)</td></tr>
<tr class="separator:a15bc7c6a7a1c7d5e0af1bb0fcbc9e4c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac334f8789dc4d86c5123f7c05379dd29" id="r_ac334f8789dc4d86c5123f7c05379dd29"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_database.html#ac334f8789dc4d86c5123f7c05379dd29">extractData</a> (const char *search_term, const char *cat)</td></tr>
<tr class="separator:ac334f8789dc4d86c5123f7c05379dd29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Наша база данных. Работает на sqlite3. Инициализуется с помощью пути к файлу. Также содержит методы обработки главного пароля и шифрования паролей в БД. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a60a40648eb37760f39516ca67f6d9738" name="a60a40648eb37760f39516ca67f6d9738"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a40648eb37760f39516ca67f6d9738">&#9670;&#160;</a></span>Database()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::Database </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Открытие БД. Если БД не открывается, падает с ошибкой. Иначе создает таблицу, если она уже не существует. Если по какой-то причине запрос создать таблицу не сработал, тоже выдает ошибку.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Путь к базе данных. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a84d399a2ad58d69daab9b05330e1316d" name="a84d399a2ad58d69daab9b05330e1316d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d399a2ad58d69daab9b05330e1316d">&#9670;&#160;</a></span>~Database()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Database::~Database </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Закрытие БД. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6226536d301e0d45d92960c738484ae4" name="a6226536d301e0d45d92960c738484ae4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6226536d301e0d45d92960c738484ae4">&#9670;&#160;</a></span>deleteData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::deleteData </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Удаление существующей записи в БД.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>ID нужной записи. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool true, если все прошло успешно, в противном случае false. </dd></dl>

</div>
</div>
<a id="ac334f8789dc4d86c5123f7c05379dd29" name="ac334f8789dc4d86c5123f7c05379dd29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac334f8789dc4d86c5123f7c05379dd29">&#9670;&#160;</a></span>extractData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; std::string &gt; &gt; Database::extractData </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>search_term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Получение записей из БД: либо по поисковому запросу, либо по категории. При извлечении пароль расшифровывается. Если оба параметра равны nullptr, просто выдает все записи. Иначе выдает записи, где сайт или комментарий содержит данный запрос, либо где категория равна данной.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">search_term</td><td>Поисковой запрос. </td></tr>
    <tr><td class="paramname">cat</td><td>Категория. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;std::vector&lt;std::string&gt;&gt; Соответствующие запросу записи. </dd></dl>

</div>
</div>
<a id="a830f3c4682fb0c3d01db2dd856d3fe3c" name="a830f3c4682fb0c3d01db2dd856d3fe3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a830f3c4682fb0c3d01db2dd856d3fe3c">&#9670;&#160;</a></span>getMaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Database::getMaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Получает главный пароль из БД (для использования как ключ для шифрования остальных паролей).</p>
<dl class="section return"><dt>Returns</dt><dd>std::string Пароль. </dd></dl>

</div>
</div>
<a id="a4af45821ed90ebb854afccad7b4c462b" name="a4af45821ed90ebb854afccad7b4c462b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4af45821ed90ebb854afccad7b4c462b">&#9670;&#160;</a></span>insertData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::insertData </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>site</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Добавление записи в БД. При добавлении пароль шифруется.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">site</td><td>Сайт. </td></tr>
    <tr><td class="paramname">pw</td><td>Пароль. </td></tr>
    <tr><td class="paramname">cat</td><td>Категория. </td></tr>
    <tr><td class="paramname">cmt</td><td>Комментарий. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool true, если все прошло успешно, в противном случае false. </dd></dl>

</div>
</div>
<a id="acf1998701b987be4f51f64a93a279cb4" name="acf1998701b987be4f51f64a93a279cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf1998701b987be4f51f64a93a279cb4">&#9670;&#160;</a></span>isFirstRun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::isFirstRun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Проверяет, существует ли таблица для главного пароля. Если существует и не пустая, то считается, что приложение запущено не впервые. Иначе - впервые.</p>
<dl class="section return"><dt>Returns</dt><dd>bool Первый/не первый запуск. </dd></dl>

</div>
</div>
<a id="af19e2a4ea9cd3c2bef5685fabff27b40" name="af19e2a4ea9cd3c2bef5685fabff27b40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af19e2a4ea9cd3c2bef5685fabff27b40">&#9670;&#160;</a></span>setMaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::setMaster </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>password</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Задает главный пароль, хэширует и сохраняет его в БД.</p>
<dl class="section return"><dt>Returns</dt><dd>bool Успех/не успех сохранения пароля. </dd></dl>

</div>
</div>
<a id="a15bc7c6a7a1c7d5e0af1bb0fcbc9e4c4" name="a15bc7c6a7a1c7d5e0af1bb0fcbc9e4c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15bc7c6a7a1c7d5e0af1bb0fcbc9e4c4">&#9670;&#160;</a></span>updateData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::updateData </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>site</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Изменение существующей записи в БД. При изменении пароль также шифруется.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>ID нужной записи. </td></tr>
    <tr><td class="paramname">site</td><td>Сайт. </td></tr>
    <tr><td class="paramname">pw</td><td>Пароль. </td></tr>
    <tr><td class="paramname">cat</td><td>Категория. </td></tr>
    <tr><td class="paramname">cmt</td><td>Комментарий. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool true, если все прошло успешно, в противном случае false. </dd></dl>

</div>
</div>
<a id="afd460398c14533a779b63b82abb04aa4" name="afd460398c14533a779b63b82abb04aa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd460398c14533a779b63b82abb04aa4">&#9670;&#160;</a></span>verifyMaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::verifyMaster </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>password</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Проверяет, соответствует ли введенный пароль сохраненному в БД.</p>
<dl class="section return"><dt>Returns</dt><dd>bool Соответствие/несоответствие пароля. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/database/<a class="el" href="database_8h_source.html">database.h</a></li>
<li>src/<b>database.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
